sap.ui.define([
	"umc/app/controller/BaseController"
], function(
	Controller
) {
	"use strict";

	return Controller.extend("umc.app.controller.sys.sys05_mail_d", {
        /**
         * @override
         */
        onInit: function() {
            const oMessageManager = sap.ui.getCore().getMessageManager();
            this.getView().setModel(oMessageManager.getMessageModel(),"message");
            oMessageManager.registerObject(this.getView(), true);

			//Program Version
			this._setOnInitNo("SYS05","20240805-01");

            this.getRouter().getRoute("RouteCre_sys05").attachPatternMatched(this._onRouteMatchedCreate, this);
            this.getRouter().getRoute("RouteEdit_sys05").attachPatternMatched(this._onRouteMatchedEdit, this);

			//清除消息
			this.MessageTools._clearMessage();

        },
		_onRouteMatchedEdit:function(oEvent){
			var headID = oEvent.getParameter("arguments").headID;

			this._setEditable(false);
			this._setCreateAble(false);

			const that = this;
			this._id = headID;

			//Bind User Information
			 this.getModel().metadataLoaded().then(() => {
				// Create
				this._bindViewData(
				this.getModel().createKey("/SYS_T11_MAIL_TEMPLATE", {
				    TEMPLATE_ID: headID,
					isActiveEntity:true
				})
			);
			});


		},
		_onRouteMatchedCreate:function(oEvent){
		    const that = this;
			this._id = "";
			this._setEditable(true);
			this._setCreateAble(true);
			that.getModel().refresh(true);

			//Unbind element
			that.getView().unbindElement();

		},
        onSave:function(){
            const that = this;
            this.MessageTools._clearMessage();
			var noErrorFlag = this.MessageTools._checkInputErrorMSG();
			if(noErrorFlag){
				noErrorFlag = that._checkHead();
			}

            //数据结构
            var context = this.getView().getBindingContext();
            var itemobj = {
                templateID: that.byId("TEMPLATE_ID").getValue(),
                mailName: that.byId("TEMPLATE_NAME").getValue(),
                mailTitle: that.byId("TEMPLATE_TITLE").getValue(),
                mailContent: that.byId("TEMPLATE_CONTENT").getValue()
            }

            var resStr = { userJson: JSON.stringify(itemobj) };

			//test
		//test
			var mailObj = { attachmentJson:{
				object: "430000001",
				value:"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Ij4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczpwZGZ1YWlkPSJodHRwOi8vd3d3LmFpaW0ub3JnL3BkZnVhL25zL2lkLyIKICAgICAgICAgICAgeG1sbnM6cGRmPSJodHRwOi8vbnMuYWRvYmUuY29tL3BkZi8xLjMvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAyNC0wOS0xMlQwNjoxMTo0N1o8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgTGl2ZUN5Y2xlIERlc2lnbmVyIDExLjA8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMjQtMDktMTJUMDY6MTE6NDdaPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMjQtMDktMTJUMDY6MTE6NDdaPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHBkZnVhaWQ6cGFydD4xPC9wZGZ1YWlkOnBhcnQ+CiAgICAgICAgIDxwZGY6UHJvZHVjZXI+QWRvYmUgWE1MIEZvcm0gTW9kdWxlIExpYnJhcnk8L3BkZjpQcm9kdWNlcj4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+dXVpZDo3MTM5MWE2YS03NzM5LTRiMTYtYjY1MS0yZjE3MDg5MjY3MzE8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnV1aWQ6Nzk2ZjMyN2ItMWRkMi0xMWIyLTBhMDAtZDQwYTA4ZWJkM2ZmPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8ZGM6Zm9ybWF0PmFwcGxpY2F0aW9uL3BkZjwvZGM6Zm9ybWF0PgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+CmVuZHN0cmVhbQplbmRvYmoKNzQgMCBvYmoKPDwvRFI8PC9Gb250PDwvTXlyaWFkUHJvLVJlZ3VsYXIgNzMgMCBSPj4+Pi9GaWVsZHNbXT4+CmVuZG9iago3NSAwIG9iago8PC9EcmF3L0Rpdi9GaWVsZC9EaXYvUGFnZS9QYXJ0L1N1YmZvcm0vU2VjdD4+CmVuZG9iago3NiAwIG9iago8PC9GaWx0ZXIvRmxhdGVEZWNvZGUvTGVuZ3RoIDExMzI+PnN0cmVhbQ0KSImcV8tuHDcQvM9X8JgcwmU3yW4SMHywbAQJ4EOsvQeGsQ42kaxEEOJ8foqjfcxoqB0uIUCPVRXZb1Y74/D16efBmb1xNprvhs2vZth82t19ftr/u7t5uHt43N/vnh73X8zjfvjH0EghQ8FqyCYxW+e9+XI/lM/vB3ZkBb/dDbfDbxW8CzandXiQZF1UnB+tRj4TiEFwuXZDtEGDAdqytl4hsEhtdvH1G95th83Nw7en3bcn8+bN5uPNL+/xv7dv372/MSPFmcc/BkIEh82Wfi9Hb78O9Pwf/Ig+W6dsErFV5832fviBNvTj9s/hw0cc8WH7HP4S+Ii7nahRiiaq9fhNEC8xjzvYMubmZYyCkSQ2xQsebG7/3n3+a7v77+wAHR0YTagAeA3g1wBhDRDXALIG0DVAWgPkNQC5GcLNUxDZWZ/ZKNLk86QNYrKc5WIGVlNAqzmgeRIcWsWb6fdjYYacrUoykvF5UBMyesUbypZpLK6vYw2u426rZsxTTR6+q5EgNjo1EWUqKsZHi+5/PuQIEfQeAhHYUkhlRoTXL5mXS0S3h3g6IUUrGC/nEyigk3I4AcghUxwmCAYiUHr9CM86NuMREJHjKFNA8jawfx0Q0Pqq+Qzw1gWeAjLbxHS2IVuKU8CLWB4Chf4O7kKopBqqwxkHP9fOeNFbLycgnVrLWcEf36dtoWkc9lJGWJBzVzjzExW4P7QFUoIxNadmG0tA1qhnRnJwT69ikM254Q5nM+vcPGScWVqoi6CkgM8aqBNGtDH4PjvxbPgm6iIDKVkqI6DHxWRLy3VcinnjWtJecRXU3JL/ir3oPu+bqEuD/fPw6DEYhRCbcrM0GGrIN0V4eStEAmZol69FZ/TZi3nm+9JaBnbTJKgYTJB8TTOhei9bSdzlLjmP57OvYwnKOIWG3E4pAmXZN2cJstd1ZpUcCiI1TcGKm0VSNHGXNgOg1FQSS5sJJZH6JiJBuUfpazvCC665KUcVm1ESTTOmYnK0Wa56R4mgD7Rv8BNBv7Q8GlMKXnrq7BWIF6amHl1GBhsr+U43wW0RDgc1Hgv7JEQP8usoRKf66yRFr5No+bJE4/OWitKXuSsMVc58HJH5UhgYGmTBTadn6AJ3SkG2ha+iKLr9NCkuWqj8IsmsNO4vDdxlZBSa/Drn1MO53Gkp1EBLYGp5UNTJSeVd66XgwM5r8XT0eqtQIanT4jTuSH0ml722ibu0GQuG+qYMLW3GqhFTE7dyL9vQdu/S37KZus7KwKLCsYlbsTmOk7HP5qJmmkqyci9KMsROf1GTuYlbubdsug3cKQWlSJ0hymXXbQrR0s2MNzN3hrcsSqnzscCm5GNny4ObpSk1lXvDZOG51l/sWakpRxWbBUO5N786HnhNOYGStWmyVUzN1slVT52HemHtG/4eW5m0ZWQRGY+tzIe+gVa4Lf09VW2eMVBET4osCopYZorMlxnL/hIkePR6idYR4jGleA5Ba6Wy5h6lX7YU55D/BRgAPrcl6AplbmRzdHJlYW0KZW5kb2JqCjc3IDAgb2JqCjw8L0FzY2VudCA5NTIvQ2FwSGVpZ2h0IDY3NC9EZXNjZW50IC0yNTAvRmxhZ3MgMzIvRm9udEJCb3hbLTE1NyAtMjUwIDExMjYgOTUyXS9Gb250RmFtaWx5KE15cmlhZCBQcm8pL0ZvbnROYW1lL015cmlhZFByby1SZWd1bGFyL0ZvbnRTdHJldGNoL05vcm1hbC9Gb250V2VpZ2h0IDQwMC9JdGFsaWNBbmdsZSAwL1N0ZW1WIDg4L1R5cGUvRm9udERlc2NyaXB0b3IvWEhlaWdodCA0ODQ+PgplbmRvYmoKNzggMCBvYmoKPDwvQ29sU3BhbiAxL0hlYWRlcnNbKFBhZ2VbMV0uZm9ybTFbMF0ucGFnZTFbMF0uI3N1YmZvcm1bMF0uVGFibGUxWzBdLkhlYWRlclJvd1swXS4jZmllbGRbM10pXS9PL1RhYmxlL1Jvd1NwYW4gMT4+CmVuZG9iago3OSAwIG9iago8PC9Db2xTcGFuIDEvTy9UYWJsZS9Sb3dTcGFuIDE+PgplbmRvYmoKODAgMCBvYmoKPDwvQ29sU3BhbiAxL08vVGFibGUvUm93U3BhbiAxPj4KZW5kb2JqCjgxIDAgb2JqCjw8L0NvbFNwYW4gMS9PL1RhYmxlL1Jvd1NwYW4gMT4+CmVuZG9iago4MiAwIG9iago8PC9Db2xTcGFuIDEvTy9UYWJsZS9Sb3dTcGFuIDE+PgplbmRvYmoKODMgMCBvYmoKPDwvQ29sU3BhbiAxL08vVGFibGUvUm93U3BhbiAxPj4KZW5kb2JqCjg0IDAgb2JqCjw8L0NvbFNwYW4gMS9PL1RhYmxlL1Jvd1NwYW4gMT4+CmVuZG9iago4NSAwIG9iago8PC9Db2xTcGFuIDEvTy9UYWJsZS9Sb3dTcGFuIDE+PgplbmRvYmoKODYgMCBvYmoKPDwvQ29sU3BhbiAxL08vVGFibGUvUm93U3BhbiAxPj4KZW5kb2JqCjg3IDAgb2JqCjw8L0NvbFNwYW4gMS9IZWFkZXJzWyhQYWdlWzFdLmZvcm0xWzBdLnBhZ2UxWzBdLiNzdWJmb3JtWzBdLlRhYmxlMVswXS5IZWFkZXJSb3dbMF0uI2ZpZWxkWzddKV0vTy9UYWJsZS9Sb3dTcGFuIDE+PgplbmRvYmoKODggMCBvYmoKPDwvQ29sU3BhbiAxL0hlYWRlcnNbKFBhZ2VbMV0uZm9ybTFbMF0ucGFnZTFbMF0uI3N1YmZvcm1bMF0uVGFibGUxWzBdLkhlYWRlclJvd1swXS4jZmllbGRbNl0pXS9PL1RhYmxlL1Jvd1NwYW4gMT4+CmVuZG9iago4OSAwIG9iago8PC9Db2xTcGFuIDEvSGVhZGVyc1soUGFnZVsxXS5mb3JtMVswXS5wYWdlMVswXS4jc3ViZm9ybVswXS5UYWJsZTFbMF0uSGVhZGVyUm93WzBdLiNmaWVsZFs1XSldL08vVGFibGUvUm93U3BhbiAxPj4KZW5kb2JqCjkwIDAgb2JqCjw8L0NvbFNwYW4gMS9IZWFkZXJzWyhQYWdlWzFdLmZvcm0xWzBdLnBhZ2UxWzBdLiNzdWJmb3JtWzBdLlRhYmxlMVswXS5IZWFkZXJSb3dbMF0uI2ZpZWxkWzRdKV0vTy9UYWJsZS9Sb3dTcGFuIDE+PgplbmRvYmoKOTEgMCBvYmoKPDwvQ29sU3BhbiAxL0hlYWRlcnNbKFBhZ2VbMV0uZm9ybTFbMF0ucGFnZTFbMF0uI3N1YmZvcm1bMF0uVGFibGUxWzBdLkhlYWRlclJvd1swXS4jZmllbGRbMl0pXS9PL1RhYmxlL1Jvd1NwYW4gMT4+CmVuZG9iago5MiAwIG9iago8PC9Db2xTcGFuIDEvSGVhZGVyc1soUGFnZVsxXS5mb3JtMVswXS5wYWdlMVswXS4jc3ViZm9ybVswXS5UYWJsZTFbMF0uSGVhZGVyUm93WzBdLiNmaWVsZFsxXSldL08vVGFibGUvUm93U3BhbiAxPj4KZW5kb2JqCjkzIDAgb2JqCjw8L0NvbFNwYW4gMS9IZWFkZXJzWyhQYWdlWzFdLmZvcm0xWzBdLnBhZ2UxWzBdLiNzdWJmb3JtWzBdLlRhYmxlMVswXS5IZWFkZXJSb3dbMF0uQ2VsbDFbMF0pXS9PL1RhYmxlL1Jvd1NwYW4gMT4+CmVuZG9iago5NCAwIG9iagpbMzAyLjk1IDY0Ni43MzYgMzAyLjk1IDY1Ny4zNDldCmVuZG9iago5NSAwIG9iagpbMTIyLjkxIDY0Ni43MzMgMTIyLjkxIDY1Ny4zNDZdCmVuZG9iago5NiAwIG9iago8PC9DcmVhdGlvbkRhdGUoRDoyMDI0MDkxMjA2MTE0N1opL0NyZWF0b3IoQWRvYmUgTGl2ZUN5Y2xlIERlc2lnbmVyIDExLjApL01vZERhdGUoRDoyMDI0MDkxMjA2MTE0N1opL1Byb2R1Y2VyKEFkb2JlIFhNTCBGb3JtIE1vZHVsZSBMaWJyYXJ5KT4+CmVuZG9iagoxMDIgMCBvYmoKPDwvRGVjb2RlUGFybXM8PC9Db2x1bW5zIDQvUHJlZGljdG9yIDEyPj4vRmlsdGVyL0ZsYXRlRGVjb2RlL0lEWzwxNTI5NkY3OUQyMURCMjExMEEwMEQ4RjY1MEVDRDNGRj48NjIzMjZGNzlEMjFEQjIxMTBBMDBEOEY2NzRFRUQzRkY+XS9JbmZvIDk2IDAgUi9MZW5ndGggMTQ4L1Jvb3QgMSAwIFIvU2l6ZSAxMDMvVHlwZS9YUmVmL1dbMSAyIDFdPj5zdHJlYW0NCmjeYmIAAiZGTjMGJgaGKiDr+xYGpn8McxiYmBhSGIFif/8DCQZGOMEPZ32Hs/5iYXHCWZ/hLGEsYgiCG876iUWWFYvYUCAYD4IIBhiX6T/Tf7FYIJfRHSRmDyRYNoG4b0BEM0jMEIVgNMQUg0iAFTdjsiDcJhBhACPuaYMscgTJvgaJ7QKxmICEbA8DQIABAA6EHHcKZW5kc3RyZWFtCmVuZG9iagpzdGFydHhyZWYKOTA5MgolJUVPRgo=",
				file_type:"pdf",
				file_name:"test"
			}}



			let newModel = this.getView().getModel('Common');
			let oBind = newModel.bindList("/s3Attachment");
			oBind.create(mailObj);


			noErrorFlag = false;
            if (noErrorFlag) {
                //Crate or Update
                this.getModel().callFunction("/SYS05_MAILTEMP_add", {
                    method: "POST",
                    urlParameters: resStr,
                    success: function(oData) {
                        that.MessageTools._addMessage(that.MessageTools._getI18nTextInModel("sys", "MSG_SUCCESS", that.getView()), "", 0, that.getView());
                        that.onNavBack
                    },
                    error: function(oError) {
                        that.MessageTools._addMessage(that.MessageTools._getI18nTextInModel("sys", "MSG_ERROR", that.getView()), "", 1, that.getView());
                    }
                })
            }
        },

        _checkHead:function(){
            var that = this;
            var TemplateID = that.byId("TEMPLATE_ID").getValue();
            var checkResult = true;

			//检查输入
			if(TemplateID ==="" || TemplateID === null){
				const sPath = that.getView().getBindingContext().getPath() + "/TEMPLATE_ID";
				that.MessageTools._addMessage(this.MessageTools._getI18nTextInModel("sys", "MSG_TEMPLATE_ID", this.getView()), sPath, 1, that.getView());
				checkResult = false;
			}

            return checkResult;
        }
	});
});